<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <title>360 全景浏览）</title>

  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css"
  />

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    #pano {
      width: 100%;
      height: 100%;
      position: relative;
    }

    /* 底部缩略图列表 */
    #thumbBar {
      position: absolute;
      bottom: 5%;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      background: rgba(0,0,0,0.3);
      padding: 5px 10px;
      border-radius: 10px;
      backdrop-filter: blur(5px);
      z-index: 10;
      overflow-x: auto;
      max-width: 90%;
      box-sizing: border-box;
    }

    #thumbBar img {
      object-fit: cover;
      cursor: pointer;
      border: 2px solid transparent;
      border-radius: 5px;
      transition: border 0.2s;
      object-fit: cover;
    }

    #thumbBar img:hover {
      border: 2px solid #fff;
    }

    #thumbBar img.active {
      border: 2px solid #00ffff;
    }
      /* 响应式缩略图大小 */
    @media (max-width: 768px) {
      #thumbBar img {
        width: 60px;
        height: 40px;
      }
    }

    @media (min-width: 769px) {
      #thumbBar img {
        width: 80px;
        height: 50px;
      }
    }

  </style>
</head>
<body>

<div id="pano"></div>
<div id="thumbBar"></div>

<script src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
<script>
  // --- 场景配置 ---
  const sceneList = [
    { id: "scence1", name: "大厅", file: "pano.jpg" },
    { id: "scence2", name: "房间", file: "dawn.jpg" },
    // { id: "kitchen", name: "厨房", file: "kitchen.jpg" }
  ];

  // 自动生成 scenes 数据
  const scenesData = {};
  sceneList.forEach(s => {
    scenesData[s.id] = { type: "equirectangular", panorama: s.file };
  });

  // 初始化 Pannellum
  const viewer = pannellum.viewer('pano', {
    default: { firstScene: sceneList[0].id, autoLoad: true, sceneFadeDuration: 1000 },
    scenes: scenesData
  });

  // 自动生成缩略图列表
  const thumbBar = document.getElementById('thumbBar');
  sceneList.forEach((s, index) => {
    const img = document.createElement('img');
    img.src = s.file;       // 使用全景图直接缩小显示
    img.dataset.scene = s.id;
    if(index === 0) img.classList.add('active');
    img.title = s.name;
    img.addEventListener('click', () => {
      viewer.loadScene(s.id);
      // 更新选中样式
      thumbBar.querySelectorAll('img').forEach(i => i.classList.remove('active'));
      img.classList.add('active');
    });
    thumbBar.appendChild(img);
  });

  // 自适应窗口
  window.addEventListener('resize', () => {
    viewer.resize();
  });
    // 监听方向变化，保证横竖屏适配
  window.addEventListener('orientationchange', () => {
    setTimeout(() => viewer.resize(), 300);
  });
</script>

</body>
</html>
